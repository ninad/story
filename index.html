<!DOCTYPE html>
<html>
<head>
  <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">
  <title>StoryMap - Simple User Story Mapping</title>
  <style>

      body {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      }

      .container {
          display: flex;
          justify-content: flex-start;
          flex-wrap: nowrap;
          overflow-x: auto;
          padding: 10px;
      }

      .activity {
          display: flex;
          flex-direction: column;
          align-items: flex-start;
          padding: 10px;
          margin-bottom: 10px;
      }

      .activity-title {
          font-weight: 600;
          margin-bottom: 10px;
          padding: 10px;
          border: 0px solid black;
          background-color: #bad8ff;
          min-width: 170px;
          max-width: 170px;
          min-height: 75px;
          box-shadow: rgba(50, 50, 93, 0.25) 0px 1px 3px -1px, rgba(0, 0, 0, 0.3) 0px 1px 1px -1px;
      }

      .tasks-container {
          display: flex;
          flex-direction: row;
          align-items: flex-start;
      }

      .task {
          font-weight: 500;
          margin-right: 10px;
          border: 0px solid black;
          width: 190px;
      }

      .task-card {
          background-color: #A5E7B2;
          padding: 10px;
          min-height: 75px;
          box-shadow: rgba(50, 50, 93, 0.25) 0px 1px 3px -1px, rgba(0, 0, 0, 0.3) 0px 1px 1px -1px;
      }

      .story {
          font-weight: 400;
          margin-top: 10px;
          padding: 10px;
          border: 0px solid black;
          background-color: #fef3ad;
          min-height: 75px;
          min-width: 100px;
          box-shadow: rgba(50, 50, 93, 0.25) 0px 1px 3px -1px, rgba(0, 0, 0, 0.3) 0px 1px 1px -1px;
      }

      textarea {
          font-size: 15px;
          line-height: 20px;
          position: fixed;
          bottom: 50px;
          height: 500px;
          width: 500px;
          border: 1px solid #dadada;
          background-color: #fafafa;
          margin: 10px;
          padding: 10px;
          transition: border-color 0.3s ease; /* Smooth transition */
          box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 24px;
      }

      .menu {
          font-size: 15px;
          position: fixed;
          bottom: 26px;
          left: 135px;
      }

      textarea:focus {
          border-color: rgb(134, 0, 0);
      }

      .hidden {
          display: none;
      }

      #hide-editor {
          font-size: 15px;
          position: fixed;
          left: 18px;
          bottom: 15px;
          border: 1px #ccc solid;
          padding: 10px;
      }
  </style>
  <script>
    function generateStoryMap() {
      const input = document.getElementById('input').value;
      window.location.hash = encodeURIComponent(input)
      const lines = input.split('\n').filter(Boolean);
      const container = document.getElementById('container');

      // Clear existing map
      while (container.firstChild) {
        container.removeChild(container.firstChild);
      }

      let currentActivity = null;
      let currentTaskContainer = null;
      let currentTask = null;

      lines.forEach(line => {
        const bulletCount = (line.match(/\*/g) || []).length;
        const title = line.replace(/\*/g, '').trim();

        if (bulletCount === 0) {
          currentActivity = document.createElement('div');
          currentActivity.className = 'activity';
          const activityTitle = document.createElement('div');
          activityTitle.className = 'activity-title';
          activityTitle.innerText = title;
          currentActivity.appendChild(activityTitle);
          currentTaskContainer = document.createElement('div');
          currentTaskContainer.className = 'tasks-container';
          currentActivity.appendChild(currentTaskContainer);
          container.appendChild(currentActivity);
        } else if (bulletCount === 1) {
          currentTask = document.createElement('div');
          currentTask.className = 'task';
          const heading = document.createElement('div')
          heading.className = "task-card"
          heading.innerText = title
          currentTask.appendChild(heading)
          currentTaskContainer.appendChild(currentTask);
        } else {
          const story = document.createElement('div');
          story.className = 'story';
          story.innerText = title;
          currentTask.appendChild(story);
        }
      });
    }

    function toggleEditor() {
      const input = document.getElementById('input');
      input.classList.toggle('hidden')
      const button = document.querySelector('#hide-editor')
      if(input.classList.contains('hidden')) {
        button.innerText = 'Show Editor'
      } else {
        button.innerText = 'Hide Editor'
      }
    }
  </script>
</head>
<body>

<div id="container" class="container"></div>

<div>
<textarea id="input" rows="35" cols="50" oninput="generateStoryMap()">
</textarea>
<button id="hide-editor" onclick="toggleEditor()">Hide Editor</button>
<div id="menu" class="menu"><a href="/how-to-use.html" target="_blank">How it works</a></div>
</div>
<script>
  function populateTextArea() {
    const defaultContent = `
üôã‚Äç‚ôÇÔ∏è Persona: James, a busy professional

üöò Activity: Order a ride

* Step: Open app
** Story: Log in to my account
** üü¢ Story: Log in with face-id

* Step: Request a ride
** Story: Set pickup location
** Story: Select ride type (UberX, UberPool etc.)
** üü¢ Story: See ETA for each ride type
** Story: Set destination

* Step: Track driver
** Story: See driver's name, photo, vehicle details
** Story: View real-time location of driver on map
** üü¢ Story: Get notified when driver is late

* Step: Take ride
** üü¢ Story: Get notified when driver arrives
** Story: Rate driver and provide feedback after trip

üçΩÔ∏è Activity: Order food delivery

* Step: Browse restaurants
** Story: Search specific food 
** Story: Search specific resturant
** Story: Browse based on popularity and rating
** üü¢Story: Intelligent suggestions based on past orders
** Story: View menu and prices

* Step: Place order
** Story: See a menu
** Story: Add items to cart
** Story: Select delivery address
** Story: Add special instructions
** Story: Pay via app

* Step: Track order
** üî¥ Story: Track order status
** üü¢ Story: Live order tracking with step-by-step status 
** Story: Chat with delivery partner

* Step: Receive order
** üî¥ Story: Food is cold on arrival
** üü¢ Story: Food kept hot during delivery
** Story: Provide ratings and feedback
`
    document.querySelector('#input').value = decodeURIComponent(window.location.hash) || defaultContent
  }
  populateTextArea()
  generateStoryMap()
</script>
</body>
</html>
